# To Do's Example
#### The Ajs Framework Example Application

Copyright &copy;2017 Atom Software Studios<br>
Released under the MIT License

---

Table of Contents

- [Introduction](#introduction)
- [Configuration](#configuration)
- [Style sheet](#style-sheet-visual-component-style)
- [Template & Visual Components](#template-visual-components)
- [View Components](#view-components)
  - [Task Visual and View component](#task-visual-and-view-component)
  - [TaskItem Visual and View component](#taskitem-visual-and-view-component)
- [Model](#model)

---

#### Introduction

To Do's is a classic example of the simple single page application developed
in TypeScript using the Ajs Frontend Application framework.

The Visual Studio 2015 solution is consisted of three projects:

1) AjsWebApp project

    AjsWebApp project is used as a helper and startup project. It contains the gulp file
    which takes care of collecting resources from other two projects and helping to continuously
    monitor and collect changed files during the development. Basically, it is used to build the
    final application. Addtitionaly, it sets up the IIS Express to be possible to debug the
    application through IE11 directly in the Visual Studio. However, it takes quiet long time
    to build and start the application in IE11 so another recommended way is to use the IIS
    installed locally and use preferred browser for debugging. Moreover, some debugging features,
    such as Data Tool Tips (hovering mouse over the variable to get its current value) does not work
    correctly with virtual files in Visual Studio at this time.

    See [AjsWebApp](https://github.com/atomsoftwarestudios/AjsWebApp) at GitHub for details.

3) ToDos

    contains implementation of the To Do's application. There are following important files and
    folders managed by the project:

    Folder / File                   | Description
    ------------------------------- | -----------
    /wwwroot                        | Contains static resources. AjsWebApp project collects files and folders from this place and places them to web root (/)
    /wwwroot/index.html             | Index page of the single page applications. Contains scripts to be loaded and other info i.e. metatags for mobile devices
    /wwwroot/templates              | Used to store templates and appropriate style sheets
    /wwwroot/templates/default.css  | Stylesheet used by the default template
    /wwwroot/templates/default.html | HTML template with VisualComponents used for the To Do's page
    /Components                     | Contains visual components implemented in the TypeScript language
    /Components/Tasks               | Code-behind (ViewModel or ViewComponent) class implementation for the Tasks form
    /Components/TaskItem.ts         | Code-behind (ViewModel or ViewComponent) class implementation for the single to do item
    /Models                         | Contains models to acccess and modify the data used by ViewComponents
    /Models/Tasks.ts                | Implementation of the data model for the To Do application
    
    ViewComponents contains the code to respond events generated by the UI and set the view state of the
    particular VisualComponent (defined by the template).

---

### Configuration

tbd

---

### Style sheet (Visual component style)

default.css is a standart CSS 2/3.0 file containing the set of CSS classes to be used within Visual Components
template.

---

### Template & Visual components

There is only single template file in the project. It can be located in the /wwwroot/templates/default.html file. It is a simple
HTML file containig two visual component definitions:

- Tasks
- Task Item

Task is the visual component which router opens when the website is navigated. Better said, the Tasks View Component with the
Tasks Visual Component is instanced and oppened. Tasks visual component contains standard HTML markup (tags and attributes), except:

```
<tr component="TaskItem" id="tasks" class="tasksItem">
```

and

```
<input class="taskDescription" type="text" value="{taskDescription}" oninput="textChanged" onkeydown="submitOnEnter" onrender="setInputField" />
```

In the first case, the **tr** element is a standard HTML table row element but declared as a reusable Visual Component
(**component** attribute). Also, it can be seen the TaskItem component (tr element) **id** attribute is set to **tasks**
value what means it takes its visual state from **tasks** property of its parent visual component object. Because the
parent property is type of Array the TaskItem component will be repeated as many times as many items will be stored
in the array. See bellow how the data mapping works.

In second case, the **onrender** attribute is used. This non-standard HTML5 attribute notifies the View Component the input
field has been rendered to the HTML document and reference to its HTMLInpuElement object can be stored (i.e. the reference
can be used to set focus to the element programatically). onrender attribute replaces the standard document.getElementBy... or
$(... constructs to obtain an HTML element reference from the DOM. 

---

### View Components & data mappings

#### Task Visual and View component


__Tasks component state properties__

```
public filter: "All" | "Done" | "Undone";
```

```
public taskDescription: string;
```

```
public actionLabel: string;
```

```
public tasks: ToDos.Models.ITask[];
```

__Tasks component HTML event handlers__

```
setInputField(value: HTMLInputElement): void
```

```
public textChanged(e: Event): void
```

```
public addUpdateTask(e: Event): void
```

```
public submitOnEnter(e: KeyboardEvent): void
```

```
public cancelUpdate(e: Event): void
```

```
public setFilter(e: Event): void
```

__Tasks child component event handlers__

```
public onTaskItemEdit(key: number): void
```

```
public onTaskItemDelete(key: number): void 
```

```
public onTaskItemDoneChanged(key: number, state: boolean): void
```


#### TaskItem Visual and View component

__Task item component state properties__

```
public key: number;
```

```
public done: boolean;
```

```
public description: string;
```

### Model

tbd